# Dot Telegram Bot

Проект представляет минимальный пример Telegram-бота, который соединяет
генеративную модель Gemini от Google с [LangGraph](https://github.com/langchain-ai/langgraph).
Бот принимает текстовые сообщения, документы и изображения и возвращает ответ,
сформированный Gemini. Если ответ слишком большой, бот отправляет его в виде
файла LaTeX, который затем можно конвертировать в другие форматы (Docx или
PDF). Такой подход позволяет корректно сохранять формулы при конвертации.

## Возможности

- **Интеграция с Telegram** через `python-telegram-bot`.
- Доступ к **Gemini API** через `google-generativeai`.
- **LangGraph**-конвейер для предобработки входных данных (заготовка в коде).
- Принимает от пользователя **текст, файлы и изображения**.
- Отправляет ответы как **текст** или **документы LaTeX** (которые можно
  конвертировать в Docx или PDF).
- Большие документы могут собираться несколькими запросами — бот может
  писать и проверять разделы по мере готовности.
- В конвейер LangGraph можно добавить узлы для поиска/генерации изображений
  для более насыщенного контента.

## Установка

1. Установите зависимости:

   ```bash
   pip install python-telegram-bot google-generativeai langgraph
   ```

2. Укажите переменные окружения:

   - `TELEGRAM_TOKEN`: токен вашего Telegram-бота.
   - `GEMINI_API_KEY`: API-ключ для Google Gemini.

3. Запустите бота:

   ```bash
   python -m bot.bot
   ```

## Как это работает

1. Пользователь отправляет боту текст, документ или изображение.
2. Бот при необходимости скачивает файл и передаёт всё содержимое в
   модель Gemini через конвейер LangGraph.
3. Gemini возвращает текстовый ответ. Если он короткий, бот отправляет его
   прямо в чат. Для длинных ответов бот упаковывает текст в файл `.tex`,
   чтобы сохранить формулы. Пользователь может конвертировать этот файл
   в Docx или PDF.
4. Агент может собирать большие документы по шагам. Пользователь может
   просить добавить разделы или внести исправления — бот продолжит с уже
   созданного содержания.

## Конвертация LaTeX в другие форматы

Любые сгенерированные файлы `.tex` можно конвертировать локально с помощью
инструментов вроде `pandoc` или `latexmk`:

```bash
pandoc response.tex -o response.pdf
pandoc response.tex -o response.docx
```

Это помогает сохранить корректность математической нотации в итоговом
документе.

## Заметки

Данная реализация намеренно минимальна. Интегрируйте LangGraph и добавляйте
узлы для поиска или генерации изображений по мере необходимости под ваш
конкретный сценарий.

